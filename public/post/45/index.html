<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#555080"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-50.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-50.png">
  <link rel="mask-icon" href="/images/favicon-50.svg" color="#555080">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha256-wiz7ZSCn/btzhjKDQBms9Hx4sSeUYsDrTLg7roPstac=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.tennisatw.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.19.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#555080","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"utterances","storage":true,"lazyload":false,"nav":null,"activeClass":"utterances"},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索 - Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits}个结果 - undefined results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="约翰霍普金斯大学有新冠期间的确诊人数和死亡人数的数据文件。利用这些文件，可以分析各国的新冠死亡率。Johns Hopkins University provides data files on confirmed cases and deaths during the COVID-19 pandemic. Using these files, one can analyze the COVID-1">
<meta property="og:type" content="article">
<meta property="og:title" content="使用R语言分析各国的新冠死亡率 - Analyzing COVID-19 Mortality Rates Among Countries Using R">
<meta property="og:url" content="https://blog.tennisatw.com/post/45/">
<meta property="og:site_name" content="Tennisatw的博客 - Blog of Tennisatw">
<meta property="og:description" content="约翰霍普金斯大学有新冠期间的确诊人数和死亡人数的数据文件。利用这些文件，可以分析各国的新冠死亡率。Johns Hopkins University provides data files on confirmed cases and deaths during the COVID-19 pandemic. Using these files, one can analyze the COVID-1">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://blog.tennisatw.com/post/45/1.png">
<meta property="article:published_time" content="2024-03-28T03:31:52.000Z">
<meta property="article:modified_time" content="2024-06-14T18:31:47.712Z">
<meta property="article:author" content="Tennisatw">
<meta property="article:tag" content="编程 - Programming">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.tennisatw.com/post/45/1.png">


<link rel="canonical" href="https://blog.tennisatw.com/post/45/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://blog.tennisatw.com/post/45/","path":"/post/45/","title":"使用R语言分析各国的新冠死亡率 - Analyzing COVID-19 Mortality Rates Among Countries Using R"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>使用R语言分析各国的新冠死亡率 - Analyzing COVID-19 Mortality Rates Among Countries Using R | Tennisatw的博客 - Blog of Tennisatw</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Tennisatw的博客 - Blog of Tennisatw" type="application/atom+xml">
<link rel="alternate" href="/rss2.xml" title="Tennisatw的博客 - Blog of Tennisatw" type="application/rss+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Tennisatw的博客 - Blog of Tennisatw</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索 - Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
    <div id="google_translate_element"></div>
    <script type="text/javascript" async="async" >
    function googleTranslateElementInit() {
      new google.translate.TranslateElement(
        {pageLanguage: 'en,zh-CN', 
        includedLanguages: 'en,zh-CN,zh-TW,es,ar,hi,ru,ja,de,fr', 
        layout: google.translate.TranslateElement.InlineLayout.HORIZONTAL}, 
        'google_translate_element');
    }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><li class="menu-item menu-item-首页---home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页 - Home</a></li><li class="menu-item menu-item-关于---about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于 - About</a></li><li class="menu-item menu-item-页面列表---pages"><a href="/pages/" rel="section"><i class="fa fa-sitemap fa-fw"></i>页面列表 - Pages</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索 - Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索 - Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          目录 - TOC
        </li>
        <li class="sidebar-nav-overview">
          概览 - Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Tennisatw"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Tennisatw</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">77</span>
          <span class="site-state-item-name">文章<br>posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/series/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">系列<br>series</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">标签<br>tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="mailto:tennisatw@mail.com" title="Email → mailto:tennisatw@mail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://github.com/tennisatw" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;tennisatw" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/tennisatw" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;tennisatw" rel="noopener me" target="_blank"><i class="fab fa-twitter fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://discord.gg/3eerBKZbpX" title="Discord → https:&#x2F;&#x2F;discord.gg&#x2F;3eerBKZbpX" rel="noopener me" target="_blank"><i class="fab fa-discord fa-fw"></i></a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://blog.tennisatw.com/post/45/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Tennisatw">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tennisatw的博客 - Blog of Tennisatw">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="使用R语言分析各国的新冠死亡率 - Analyzing COVID-19 Mortality Rates Among Countries Using R | Tennisatw的博客 - Blog of Tennisatw">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          使用R语言分析各国的新冠死亡率 - Analyzing COVID-19 Mortality Rates Among Countries Using R
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于 - Posted on</span>

      <time title="Created: 2024/03/27 21:31:52" itemprop="dateCreated datePublished" datetime="2024-03-27T21:31:52-06:00">2024/03/27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">编辑于 - Edited on</span>
      <time title="Modified: 2024/06/14 12:31:47" itemprop="dateModified" datetime="2024-06-14T12:31:47-06:00">2024/06/14</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="字数 - Word count">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">字数 - Word count: </span>
      <span>1.9k</span>
    </span>
    <span class="post-meta-item" title="阅读时间 - Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时间 - Reading time &asymp;</span>
      <span>7 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>约翰霍普金斯大学有新冠期间的确诊人数和死亡人数的<a
target="_blank" rel="noopener" href="https://github.com/CSSEGISandData/COVID-19/tree/master/csse_covid_19_data/csse_covid_19_time_series">数据文件</a>。利用这些文件，可以分析各国的新冠死亡率。</p>
<p>Johns Hopkins University provides <a
target="_blank" rel="noopener" href="https://github.com/CSSEGISandData/COVID-19/tree/master/csse_covid_19_data/csse_covid_19_time_series">data
files</a> on confirmed cases and deaths during the COVID-19 pandemic.
Using these files, one can analyze the COVID-19 mortality rates of
different countries.</p>
<p><br></p>
<p>首先，下载csv文件，并读取数据。一共有4个文件，美国的确诊和死亡人数，以及其他国家的确诊和死亡人数。</p>
<p>First, download the CSV files and load the data. There are four
files: confirmed and death cases in the USA, and confirmed and death
cases in other countries.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">us_conf_raw <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&quot;covid_19/time_series_covid19_confirmed_US.csv&quot;</span><span class="punctuation">)</span></span><br><span class="line">us_death_raw <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&quot;covid_19/time_series_covid19_deaths_US.csv&quot;</span><span class="punctuation">)</span></span><br><span class="line">global_conf_raw <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&quot;covid_19/time_series_covid19_confirmed_global.csv&quot;</span><span class="punctuation">)</span></span><br><span class="line">global_death_raw <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&quot;covid_19/time_series_covid19_deaths_global.csv&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<p>从数据中读取日期信息。</p>
<p>Extract the date information from the data.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dates <span class="operator">&lt;-</span> us_conf_raw <span class="operator">%&gt;%</span></span><br><span class="line">    select<span class="punctuation">(</span><span class="operator">-</span><span class="built_in">c</span><span class="punctuation">(</span>UID<span class="punctuation">,</span> iso2<span class="punctuation">,</span> iso3<span class="punctuation">,</span> code3<span class="punctuation">,</span> FIPS<span class="punctuation">,</span> Admin2<span class="punctuation">,</span> Country_Region<span class="punctuation">,</span> </span><br><span class="line">    Province_State<span class="punctuation">,</span> Lat<span class="punctuation">,</span> Long_<span class="punctuation">,</span> Combined_Key<span class="punctuation">)</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    colnames<span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    as.Date<span class="punctuation">(</span>format <span class="operator">=</span> <span class="string">&quot;X%m.%d.%y&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<p>读取美国的确诊人数，使用select方法选择需要的列，然后将各个郡的确诊人数相加。死亡人数的读取方法与之相同。</p>
<p>For the USA, read the number of confirmed cases, use the select
method to choose the necessary columns, then sum the confirmed cases
across counties. Follow the same method to read the number of
deaths.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">us_conf <span class="operator">&lt;-</span> us_conf_raw <span class="operator">%&gt;%</span></span><br><span class="line">    select<span class="punctuation">(</span><span class="operator">-</span><span class="built_in">c</span><span class="punctuation">(</span>UID<span class="punctuation">,</span> iso2<span class="punctuation">,</span> iso3<span class="punctuation">,</span> code3<span class="punctuation">,</span> FIPS<span class="punctuation">,</span> Admin2<span class="punctuation">,</span> Country_Region<span class="punctuation">,</span> </span><br><span class="line">    Province_State<span class="punctuation">,</span> Lat<span class="punctuation">,</span> Long_<span class="punctuation">,</span> Combined_Key<span class="punctuation">)</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    colSums<span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    as.vector<span class="punctuation">(</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<p>读取其他国家的确诊人数，使用filter选取感兴趣的行。死亡人数的读取方法与之相同。这里选择了3个国家：中国，日本，和加拿大。</p>
<p>For other countries, read the number of confirmed cases, using the
filter to select the rows of interest. The method for reading the number
of deaths is the same. Three countries were chosen for this analysis:
China, Japan, and Canada.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">global_conf <span class="operator">&lt;-</span> global_conf_raw <span class="operator">%&gt;%</span></span><br><span class="line">    select<span class="punctuation">(</span><span class="operator">-</span><span class="built_in">c</span><span class="punctuation">(</span>Province.State<span class="punctuation">,</span> Lat<span class="punctuation">,</span> Long<span class="punctuation">)</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    filter<span class="punctuation">(</span>Country.Region <span class="operator">%in%</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;China&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Japan&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Canada&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">china_conf <span class="operator">&lt;-</span> global_conf <span class="operator">%&gt;%</span></span><br><span class="line">    filter<span class="punctuation">(</span>Country.Region <span class="operator">==</span> <span class="string">&quot;China&quot;</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    select<span class="punctuation">(</span><span class="operator">-</span>Country.Region<span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    colSums<span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    as.vector<span class="punctuation">(</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<p>把所有的数据都储存在一个data.frame中。由于美国的数据的前10天的死亡率过高，所以从11天开始。</p>
<p>Store all the data in a data.frame. Since the mortality rate in the
USA was abnormally high in the first 10 days, the analysis starts from
day 11.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">data <span class="operator">&lt;-</span> data.frame<span class="punctuation">(</span></span><br><span class="line">    dates <span class="operator">=</span> dates<span class="punctuation">[</span><span class="number">11</span><span class="operator">:</span><span class="built_in">length</span><span class="punctuation">(</span>dates<span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    us_death <span class="operator">=</span> us_death<span class="punctuation">[</span><span class="number">11</span><span class="operator">:</span><span class="built_in">length</span><span class="punctuation">(</span>us_death<span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    us_conf <span class="operator">=</span> us_conf<span class="punctuation">[</span><span class="number">11</span><span class="operator">:</span><span class="built_in">length</span><span class="punctuation">(</span>us_conf<span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    china_death <span class="operator">=</span> china_death<span class="punctuation">[</span><span class="number">11</span><span class="operator">:</span><span class="built_in">length</span><span class="punctuation">(</span>china_death<span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    china_conf <span class="operator">=</span> china_conf<span class="punctuation">[</span><span class="number">11</span><span class="operator">:</span><span class="built_in">length</span><span class="punctuation">(</span>china_conf<span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    japan_death <span class="operator">=</span> japan_death<span class="punctuation">[</span><span class="number">11</span><span class="operator">:</span><span class="built_in">length</span><span class="punctuation">(</span>japan_death<span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    japan_conf <span class="operator">=</span> japan_conf<span class="punctuation">[</span><span class="number">11</span><span class="operator">:</span><span class="built_in">length</span><span class="punctuation">(</span>japan_conf<span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    canada_death <span class="operator">=</span> canada_death<span class="punctuation">[</span><span class="number">11</span><span class="operator">:</span><span class="built_in">length</span><span class="punctuation">(</span>canada_death<span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    canada_conf <span class="operator">=</span> canada_conf<span class="punctuation">[</span><span class="number">11</span><span class="operator">:</span><span class="built_in">length</span><span class="punctuation">(</span>canada_conf<span class="punctuation">)</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<p>画图</p>
<p>Plotting the Data</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">graph_death_rate <span class="operator">&lt;-</span> ggplot<span class="punctuation">(</span>data<span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">    geom_line<span class="punctuation">(</span>aes<span class="punctuation">(</span>x <span class="operator">=</span> dates<span class="punctuation">,</span> y <span class="operator">=</span> us_death <span class="operator">/</span> us_conf<span class="punctuation">)</span><span class="punctuation">,</span> color <span class="operator">=</span> <span class="string">&quot;black&quot;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">    geom_line<span class="punctuation">(</span>aes<span class="punctuation">(</span>x <span class="operator">=</span> dates<span class="punctuation">,</span> y <span class="operator">=</span> china_death <span class="operator">/</span> china_conf<span class="punctuation">)</span><span class="punctuation">,</span> color <span class="operator">=</span> <span class="string">&quot;red&quot;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">    geom_line<span class="punctuation">(</span>aes<span class="punctuation">(</span>x <span class="operator">=</span> dates<span class="punctuation">,</span> y <span class="operator">=</span> japan_death <span class="operator">/</span> japan_conf<span class="punctuation">)</span><span class="punctuation">,</span> color <span class="operator">=</span> <span class="string">&quot;blue&quot;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">    geom_line<span class="punctuation">(</span>aes<span class="punctuation">(</span>x <span class="operator">=</span> dates<span class="punctuation">,</span> y <span class="operator">=</span> canada_death <span class="operator">/</span> canada_conf<span class="punctuation">)</span><span class="punctuation">,</span> color <span class="operator">=</span> <span class="string">&quot;green&quot;</span><span class="punctuation">)</span> <span class="operator">+</span> </span><br><span class="line">    scale_y_continuous<span class="punctuation">(</span>labels <span class="operator">=</span> scales<span class="operator">::</span>percent<span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">    labs<span class="punctuation">(</span>y <span class="operator">=</span> <span class="string">&quot;Death rate&quot;</span><span class="punctuation">,</span> x <span class="operator">=</span> <span class="string">&quot;Date&quot;</span><span class="punctuation">,</span> title <span class="operator">=</span> <span class="string">&quot;Death rate of COVID-19&quot;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line"></span><br><span class="line">print<span class="punctuation">(</span>graph_death_rate<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<p>最后得到的图像如下。黑色代表美国，红色代表中国，蓝色为日本，绿色为加拿大。</p>
<p>The resulting graph is as follows. Black represents the USA, red for
China, blue for Japan, and green for Canada.</p>
<p><img src="1.png" /></p>
<p><br></p>
<p>完整版的代码如下：</p>
<p>The full code is as follows:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">library<span class="punctuation">(</span>dplyr<span class="punctuation">)</span></span><br><span class="line">library<span class="punctuation">(</span>ggplot2<span class="punctuation">)</span></span><br><span class="line">library<span class="punctuation">(</span>tidyr<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取数据 - Read data</span></span><br><span class="line">us_conf_raw <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&quot;covid_19/time_series_covid19_confirmed_US.csv&quot;</span><span class="punctuation">)</span></span><br><span class="line">us_death_raw <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&quot;covid_19/time_series_covid19_deaths_US.csv&quot;</span><span class="punctuation">)</span></span><br><span class="line">global_conf_raw <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&quot;covid_19/time_series_covid19_confirmed_global.csv&quot;</span><span class="punctuation">)</span></span><br><span class="line">global_death_raw <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&quot;covid_19/time_series_covid19_deaths_global.csv&quot;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取日期信息 - Read date information</span></span><br><span class="line">dates <span class="operator">&lt;-</span> us_conf_raw <span class="operator">%&gt;%</span></span><br><span class="line">    select<span class="punctuation">(</span><span class="operator">-</span><span class="built_in">c</span><span class="punctuation">(</span>UID<span class="punctuation">,</span> iso2<span class="punctuation">,</span> iso3<span class="punctuation">,</span> code3<span class="punctuation">,</span> FIPS<span class="punctuation">,</span> Admin2<span class="punctuation">,</span> Country_Region<span class="punctuation">,</span> </span><br><span class="line">    Province_State<span class="punctuation">,</span> Lat<span class="punctuation">,</span> Long_<span class="punctuation">,</span> Combined_Key<span class="punctuation">)</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    colnames<span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    as.Date<span class="punctuation">(</span>format <span class="operator">=</span> <span class="string">&quot;X%m.%d.%y&quot;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 美国确诊数据 - US confirmed data</span></span><br><span class="line">us_conf <span class="operator">&lt;-</span> us_conf_raw <span class="operator">%&gt;%</span></span><br><span class="line">    select<span class="punctuation">(</span><span class="operator">-</span><span class="built_in">c</span><span class="punctuation">(</span>UID<span class="punctuation">,</span> iso2<span class="punctuation">,</span> iso3<span class="punctuation">,</span> code3<span class="punctuation">,</span> FIPS<span class="punctuation">,</span> Admin2<span class="punctuation">,</span> Country_Region<span class="punctuation">,</span> </span><br><span class="line">    Province_State<span class="punctuation">,</span> Lat<span class="punctuation">,</span> Long_<span class="punctuation">,</span> Combined_Key<span class="punctuation">)</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    colSums<span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    as.vector<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 美国死亡数据 - US death data</span></span><br><span class="line">us_death <span class="operator">&lt;-</span> us_death_raw <span class="operator">%&gt;%</span></span><br><span class="line">    select<span class="punctuation">(</span><span class="operator">-</span><span class="built_in">c</span><span class="punctuation">(</span>UID<span class="punctuation">,</span> iso2<span class="punctuation">,</span> iso3<span class="punctuation">,</span> code3<span class="punctuation">,</span> FIPS<span class="punctuation">,</span> Admin2<span class="punctuation">,</span> Country_Region<span class="punctuation">,</span> </span><br><span class="line">    Province_State<span class="punctuation">,</span> Lat<span class="punctuation">,</span> Long_<span class="punctuation">,</span> Combined_Key<span class="punctuation">,</span> Population<span class="punctuation">)</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    colSums<span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    as.vector<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 全球确诊数据 - Global confirmed data</span></span><br><span class="line">global_conf <span class="operator">&lt;-</span> global_conf_raw <span class="operator">%&gt;%</span></span><br><span class="line">    select<span class="punctuation">(</span><span class="operator">-</span><span class="built_in">c</span><span class="punctuation">(</span>Province.State<span class="punctuation">,</span> Lat<span class="punctuation">,</span> Long<span class="punctuation">)</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    filter<span class="punctuation">(</span>Country.Region <span class="operator">%in%</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;China&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Japan&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Canada&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 全球死亡数据 - Global death data</span></span><br><span class="line">global_death <span class="operator">&lt;-</span> global_death_raw <span class="operator">%&gt;%</span></span><br><span class="line">    select<span class="punctuation">(</span><span class="operator">-</span><span class="built_in">c</span><span class="punctuation">(</span>Province.State<span class="punctuation">,</span> Lat<span class="punctuation">,</span> Long<span class="punctuation">)</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    filter<span class="punctuation">(</span>Country.Region <span class="operator">%in%</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;China&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Japan&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Canada&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 中国确诊数据 - China confirmed data</span></span><br><span class="line">china_conf <span class="operator">&lt;-</span> global_conf <span class="operator">%&gt;%</span></span><br><span class="line">    filter<span class="punctuation">(</span>Country.Region <span class="operator">==</span> <span class="string">&quot;China&quot;</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    select<span class="punctuation">(</span><span class="operator">-</span>Country.Region<span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    colSums<span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    as.vector<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 中国死亡数据 - China death data</span></span><br><span class="line">china_death <span class="operator">&lt;-</span> global_death <span class="operator">%&gt;%</span></span><br><span class="line">    filter<span class="punctuation">(</span>Country.Region <span class="operator">==</span> <span class="string">&quot;China&quot;</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    select<span class="punctuation">(</span><span class="operator">-</span>Country.Region<span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    colSums<span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    as.vector<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 日本确诊数据 - Japan confirmed data</span></span><br><span class="line">japan_conf <span class="operator">&lt;-</span> global_conf <span class="operator">%&gt;%</span></span><br><span class="line">    filter<span class="punctuation">(</span>Country.Region <span class="operator">==</span> <span class="string">&quot;Japan&quot;</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    select<span class="punctuation">(</span><span class="operator">-</span>Country.Region<span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    colSums<span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    as.vector<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 日本死亡数据 - Japan death data</span></span><br><span class="line">japan_death <span class="operator">&lt;-</span> global_death <span class="operator">%&gt;%</span></span><br><span class="line">    filter<span class="punctuation">(</span>Country.Region <span class="operator">==</span> <span class="string">&quot;Japan&quot;</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    select<span class="punctuation">(</span><span class="operator">-</span>Country.Region<span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    colSums<span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    as.vector<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加拿大确诊数据 - Canada confirmed data</span></span><br><span class="line">canada_conf <span class="operator">&lt;-</span> global_conf <span class="operator">%&gt;%</span></span><br><span class="line">    filter<span class="punctuation">(</span>Country.Region <span class="operator">==</span> <span class="string">&quot;Canada&quot;</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    select<span class="punctuation">(</span><span class="operator">-</span>Country.Region<span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    colSums<span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    as.vector<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加拿大死亡数据 - Canada death data</span></span><br><span class="line">canada_death <span class="operator">&lt;-</span> global_death <span class="operator">%&gt;%</span></span><br><span class="line">    filter<span class="punctuation">(</span>Country.Region <span class="operator">==</span> <span class="string">&quot;Canada&quot;</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    select<span class="punctuation">(</span><span class="operator">-</span>Country.Region<span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    colSums<span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">%&gt;%</span></span><br><span class="line">    as.vector<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 整理数据 - Organize data</span></span><br><span class="line">data <span class="operator">&lt;-</span> data.frame<span class="punctuation">(</span></span><br><span class="line">    dates <span class="operator">=</span> dates<span class="punctuation">[</span><span class="number">11</span><span class="operator">:</span><span class="built_in">length</span><span class="punctuation">(</span>dates<span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    us_death <span class="operator">=</span> us_death<span class="punctuation">[</span><span class="number">11</span><span class="operator">:</span><span class="built_in">length</span><span class="punctuation">(</span>us_death<span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    us_conf <span class="operator">=</span> us_conf<span class="punctuation">[</span><span class="number">11</span><span class="operator">:</span><span class="built_in">length</span><span class="punctuation">(</span>us_conf<span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    china_death <span class="operator">=</span> china_death<span class="punctuation">[</span><span class="number">11</span><span class="operator">:</span><span class="built_in">length</span><span class="punctuation">(</span>china_death<span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    china_conf <span class="operator">=</span> china_conf<span class="punctuation">[</span><span class="number">11</span><span class="operator">:</span><span class="built_in">length</span><span class="punctuation">(</span>china_conf<span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    japan_death <span class="operator">=</span> japan_death<span class="punctuation">[</span><span class="number">11</span><span class="operator">:</span><span class="built_in">length</span><span class="punctuation">(</span>japan_death<span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    japan_conf <span class="operator">=</span> japan_conf<span class="punctuation">[</span><span class="number">11</span><span class="operator">:</span><span class="built_in">length</span><span class="punctuation">(</span>japan_conf<span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    canada_death <span class="operator">=</span> canada_death<span class="punctuation">[</span><span class="number">11</span><span class="operator">:</span><span class="built_in">length</span><span class="punctuation">(</span>canada_death<span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    canada_conf <span class="operator">=</span> canada_conf<span class="punctuation">[</span><span class="number">11</span><span class="operator">:</span><span class="built_in">length</span><span class="punctuation">(</span>canada_conf<span class="punctuation">)</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 画图 - Plot</span></span><br><span class="line"><span class="comment"># 确诊人数 - Confirmed cases</span></span><br><span class="line">graph_conf <span class="operator">&lt;-</span> ggplot<span class="punctuation">(</span>data<span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">    geom_line<span class="punctuation">(</span>aes<span class="punctuation">(</span>x <span class="operator">=</span> dates<span class="punctuation">,</span> y <span class="operator">=</span> us_conf<span class="punctuation">)</span><span class="punctuation">,</span> color <span class="operator">=</span> <span class="string">&quot;black&quot;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">    geom_line<span class="punctuation">(</span>aes<span class="punctuation">(</span>x <span class="operator">=</span> dates<span class="punctuation">,</span> y <span class="operator">=</span> china_conf<span class="punctuation">)</span><span class="punctuation">,</span> color <span class="operator">=</span> <span class="string">&quot;red&quot;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">    geom_line<span class="punctuation">(</span>aes<span class="punctuation">(</span>x <span class="operator">=</span> dates<span class="punctuation">,</span> y <span class="operator">=</span> japan_conf<span class="punctuation">)</span><span class="punctuation">,</span> color <span class="operator">=</span> <span class="string">&quot;blue&quot;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">    geom_line<span class="punctuation">(</span>aes<span class="punctuation">(</span>x <span class="operator">=</span> dates<span class="punctuation">,</span> y <span class="operator">=</span> canada_conf<span class="punctuation">)</span><span class="punctuation">,</span> color <span class="operator">=</span> <span class="string">&quot;green&quot;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 死亡人数 - Death cases</span></span><br><span class="line">graph_death <span class="operator">&lt;-</span> ggplot<span class="punctuation">(</span>data<span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">    geom_line<span class="punctuation">(</span>aes<span class="punctuation">(</span>x <span class="operator">=</span> dates<span class="punctuation">,</span> y <span class="operator">=</span> us_death<span class="punctuation">)</span><span class="punctuation">,</span> color <span class="operator">=</span> <span class="string">&quot;black&quot;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">    geom_line<span class="punctuation">(</span>aes<span class="punctuation">(</span>x <span class="operator">=</span> dates<span class="punctuation">,</span> y <span class="operator">=</span> china_death<span class="punctuation">)</span><span class="punctuation">,</span> color <span class="operator">=</span> <span class="string">&quot;red&quot;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">    geom_line<span class="punctuation">(</span>aes<span class="punctuation">(</span>x <span class="operator">=</span> dates<span class="punctuation">,</span> y <span class="operator">=</span> japan_death<span class="punctuation">)</span><span class="punctuation">,</span> color <span class="operator">=</span> <span class="string">&quot;blue&quot;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">    geom_line<span class="punctuation">(</span>aes<span class="punctuation">(</span>x <span class="operator">=</span> dates<span class="punctuation">,</span> y <span class="operator">=</span> canada_death<span class="punctuation">)</span><span class="punctuation">,</span> color <span class="operator">=</span> <span class="string">&quot;green&quot;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 死亡率 - Death rate</span></span><br><span class="line"><span class="comment"># 添加图例 - Add legend</span></span><br><span class="line">graph_death_rate <span class="operator">&lt;-</span> ggplot<span class="punctuation">(</span>data<span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">    geom_line<span class="punctuation">(</span>aes<span class="punctuation">(</span>x <span class="operator">=</span> dates<span class="punctuation">,</span> y <span class="operator">=</span> us_death <span class="operator">/</span> us_conf<span class="punctuation">)</span><span class="punctuation">,</span> color <span class="operator">=</span> <span class="string">&quot;black&quot;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">    geom_line<span class="punctuation">(</span>aes<span class="punctuation">(</span>x <span class="operator">=</span> dates<span class="punctuation">,</span> y <span class="operator">=</span> china_death <span class="operator">/</span> china_conf<span class="punctuation">)</span><span class="punctuation">,</span> color <span class="operator">=</span> <span class="string">&quot;red&quot;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">    geom_line<span class="punctuation">(</span>aes<span class="punctuation">(</span>x <span class="operator">=</span> dates<span class="punctuation">,</span> y <span class="operator">=</span> japan_death <span class="operator">/</span> japan_conf<span class="punctuation">)</span><span class="punctuation">,</span> color <span class="operator">=</span> <span class="string">&quot;blue&quot;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">    geom_line<span class="punctuation">(</span>aes<span class="punctuation">(</span>x <span class="operator">=</span> dates<span class="punctuation">,</span> y <span class="operator">=</span> canada_death <span class="operator">/</span> canada_conf<span class="punctuation">)</span><span class="punctuation">,</span> color <span class="operator">=</span> <span class="string">&quot;green&quot;</span><span class="punctuation">)</span> <span class="operator">+</span> </span><br><span class="line">    scale_y_continuous<span class="punctuation">(</span>labels <span class="operator">=</span> scales<span class="operator">::</span>percent<span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">    labs<span class="punctuation">(</span>y <span class="operator">=</span> <span class="string">&quot;Death rate&quot;</span><span class="punctuation">,</span> x <span class="operator">=</span> <span class="string">&quot;Date&quot;</span><span class="punctuation">,</span> title <span class="operator">=</span> <span class="string">&quot;Death rate of COVID-19&quot;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line"></span><br><span class="line">print<span class="punctuation">(</span>graph_death_rate<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<hr />
<p>我感觉R比起python来，至少有2大优点：</p>
<p>I feel that R has at least two major advantages over Python:</p>
<p><br></p>
<p>R的很多数据结构和功能都是原生的，比如data.frame，或是vector。相比之下，虽然Python也有类似的结构，但是需要导入其他的包才能获得。</p>
<p>Many of R's data structures and functions are native, such as
data.frame and vector. In contrast, although Python has similar
structures, they require importing additional packages to be
accessed.</p>
<p><br></p>
<p>R不需要配置复杂的环境变量，只需要下载一个软件，相比之下，python的环境的配置方法能直接劝退初学者，我现在都数不清我电脑里有多少python.exe。此外，R在包管理和环境配置上非常的舒服。python想要安装一个包时（如果不通过ipynb的魔法命令的话），只能离开编程界面，去控制台输入pip
install ... ，而R不需要去控制台输入rir install，直接在编程界面中使用
install.packages("...") 就可以了。这一点真是大大的舒服。</p>
<p>R does not require complex environment variable configuration. One
just needs to download the software. In comparison, the method of
configuring Python's environment can be daunting for beginners; I've
lost count of how many python.exe files I have on my computer. Moreover,
R is very user-friendly in terms of package management and environment
configuration. In Python, to install a package (if not using the magic
commands in ipynb), one has to leave the programming interface and enter
"pip install ..." in the console, while in R, one can simply use
install.packages("...") directly in the programming interface rather
than using "rir install ...". This is a significant convenience.</p>
<p><br></p>
<p>但与此同时，R也有很多缺点，其中有一些我实在是难以忍受：</p>
<p>However, R also has several drawbacks, some of which I find quite
intolerable:</p>
<p><br></p>
<p>R的函数命名有点混乱，比如将矩阵（matrix）转换成数据框（tibble）使用as_tibble函数，但反过来就使用as.matrix函数。</p>
<p>R's function naming can be confusing; for example, converting a
matrix to a data frame (tibble) uses the as_tibble function, but the
reverse uses the as.matrix function.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">m <span class="operator">&lt;-</span> as.matrix<span class="punctuation">(</span>df<span class="punctuation">)</span></span><br><span class="line">print<span class="punctuation">(</span>m<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">df <span class="operator">&lt;-</span> as_tibble<span class="punctuation">(</span>m<span class="punctuation">)</span></span><br><span class="line">print<span class="punctuation">(</span>df<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>R的一些函数的格式有时显得莫名奇妙，比如where函数仅在select函数内才有意义等等。</p>
<p>The syntax of some R functions can sometimes be peculiar, such as the
"where" function only making sense within the "select" function, and so
on.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select<span class="punctuation">(</span>where<span class="punctuation">(</span><span class="built_in">is.character</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<p>ggplot的数据导入的方法也让我难以理解，可能是因为我没有熟悉R的逻辑吧。</p>
<p>I also find the method of importing data into ggplot difficult to
understand, perhaps because I am not familiar with R's logic.</p>
<p><br></p>
<p>我最不能忍受，最不能理解的一点是为什么要允许点号“.”出现在变量名称里，不仅如此，带有点号的R的默认函数名和默认变量简直是铺天盖地，对我来说，代码阅读速度直接腰斩。</p>
<p>What I find most intolerable and incomprehensible is the allowance of
the dot “.” in variable names. Moreover, R's default function and
variable names contain so many dots. For me, this significantly slows
down the speed of reading code.</p>
<p><br></p>
<p>总而言之，R给我的感觉是混乱且强大的语言。</p>
<p>In summary, R strikes me as a chaotic yet powerful language.</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E7%BC%96%E7%A8%8B-programming/" rel="tag"># 编程 - Programming</a>
          </div>

        
  <div class="social-like a2a_kit a2a_kit_size_32 a2a_default_style">
    <a class="a2a_dd" target="_blank" rel="noopener" href="https://www.addtoany.com/share"></a>
      <a class="a2a_button_facebook"></a>
      <a class="a2a_button_twitter"></a>
      <a class="a2a_button_sina_weibo"></a>
      <a class="a2a_button_wechat"></a>
      <a class="a2a_button_mastodon"></a>
  </div>

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/post/44/" rel="prev" title="绘制Gromacs的xvg文件的脚本 - Script for plotting Gromacs xvg files">
                  <i class="fa fa-angle-left"></i> 绘制Gromacs的xvg文件的脚本 - Script for plotting Gromacs xvg files
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/post/46/" rel="next" title="为没有拓扑信息的系统分析氢键 - Analyzing Hydrogen Bonds in Systems without Topological Information">
                  为没有拓扑信息的系统分析氢键 - Analyzing Hydrogen Bonds in Systems without Topological Information <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments utterances-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2023 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class=""></i>
    </span>
    <span class="author" itemprop="copyrightHolder">多想，多读，多练，多问 - Think more, read more, practice more, and ask more</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
    <div>
      <p class="footer-hidden"><br><br><br><br><br><br><br><br>本处广告位招租 - This ad space is available for rent</p>
      <p class="footer-hidden">上次更新时间 - Last Updated: ||2024/08/14 19:57:11||</p>
    </div>
  </div>

    </div>
  </footer>

  

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>






  <script src="/js/third-party/addtoany.js"></script>

  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"user-name/repo-name","issue_term":"pathname","theme":"github-light"}</script>
<script src="/js/third-party/comments/utterances.js"></script>


</body>
</html>

<script src="/live2d-widget/autoload.js" async="async" ></script>
<link rel="stylesheet" href="/waline/waline.css"/>
<script type="module">
    import { init } from '/waline/waline.mjs';
    window.init = init;
</script>

<script type="module">
  window.init({
    el: '.comments',
    lang: 'en',
    serverURL: 'https://comment.tennisatw.com',
  });
</script>

<script>
  window.onload = function() {
    // 延迟执行，确保动画已经完成
    setTimeout(function() {
      // 获取需要操作的元素
      const targetLanguageDiv = document.getElementById(":0.targetLanguage");
      const skipTranslateDiv = document.querySelector(".skiptranslate.goog-te-gadget");
      
      // 删除不需要的文本节点和span元素
      if (skipTranslateDiv) {
        const textNodes = Array.from(skipTranslateDiv.childNodes).filter(node => node.nodeType === Node.TEXT_NODE);
        textNodes.forEach(node => node.remove());
        
        const spanElement = skipTranslateDiv.querySelector("span");
        if (spanElement) {
            spanElement.remove();
        }
      }

      // 隐藏不需要的元素
      var trans = document.getElementsByClassName('VIpgJd-ZVi9od-aZ2wEe-wOHMyf');
        for (var i = 0; i < trans.length; i++) {
            var tran = trans[i];
                tran.className += " hidden";
        }

    }, 500); // 延迟时间
  };
</script>